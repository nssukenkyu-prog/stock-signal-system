name = "stock-signal-bot"
main = "src/index.ts"
compatibility_date = "2024-12-01"

# Cron Triggers
[triggers]
crons = [
  "*/5 0-6 * * 1-5",   # 日本市場時間(9:00-15:00 JST = 0:00-6:00 UTC): 5分毎
  "*/5 14-21 * * 1-5", # 米国市場時間(23:30-6:00 JST = 14:30-21:00 UTC): 5分毎
  "0 7 * * 1-5",       # 日本終値後サマリー(16:00 JST = 7:00 UTC)
  "0 22 * * 1-5",      # 米国終値後サマリー(7:00 JST = 22:00 UTC 前日)
]

# KV Namespaces
[[kv_namespaces]]
binding = "STATE"
id = "f769faf5c2f840e8bebd6ee4ecbdfccd"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "stock-signals"
database_id = "7170a45d-a170-4abe-b0e0-3dbcbb5b4147"

# Environment variables (non-secret)
[vars]
ENVIRONMENT = "production"
COOLDOWN_HOURS = "24"
MAX_NOTIFICATIONS_PER_DAY = "50"

# Secrets (set via wrangler secret put)
# LINE_CHANNEL_ACCESS_TOKEN
# LINE_USER_ID
